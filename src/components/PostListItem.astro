---
import type { CollectionEntry } from "astro:content";
import { formatDate } from "@/lib/utils";
import { getPostHref } from "@/lib/blog";
import LinkedBadge from "./LinkedBadge.astro";

interface Props {
  post: CollectionEntry<"blog">;
  showDescription?: boolean;
}

const { post, showDescription = true } = Astro.props;

const href = getPostHref(post);
const formattedDate = formatDate(post.data.date);
---

<section class="mb-8">
  <a href={href} class="text-xl font-medium hover:underline">
    {post.data.title}
  </a>
  {
    showDescription && post.data.description ? (
      <p class="text-base text-gray-800 mb-2">{post.data.description}</p>
    ) : null
  }
  <div class="flex flex-row items-center">
    <p class="text-sm text-gray-600">{formattedDate}</p>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-4 w-4 text-gray-400"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M12 4 V20"
      />
    </svg>
    <div class="flex flex-row gap-2 items-center">
      <p class="text-sm text-gray-600">Tags:</p>
      {
        post.data.tags?.map((tag) => (
         <LinkedBadge
           href={`/tags/${tag}`}
            key={tag}
            class="text-xs text-foreground bg-gray-200">{tag}</LinkedBadge>
        ))
      }
  </div>
</section>
